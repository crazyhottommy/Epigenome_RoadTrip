### reprepare our own tumor data set using my pipeline

I have prepared our own tumor data set on [day4](https://github.com/crazyhottommy/Epigenome_RoadTrip/blob/master/daily_notes/2018-03-16_day4.md#time-to-prepare-our-own-tumor-data)

Since I wrote a [snakemake pipeline](https://github.com/crazyhottommy/pyflow-epilogos), I will re-process it with the pipeline.
Moreover, the tumor data were called by chromHMM using 18states. some states can
be combined. I will use scripts to do the [state recoding](https://github.com/crazyhottommy/pyflow-epilogos/blob/master/scripts/recode_dense_seg_state_color.py) and [bin merging](https://github.com/crazyhottommy/pyflow-epilogos/blob/master/scripts/merge_bin.py).

Finally, I will import to R and do filtering of the features.

```bash
ssh railab
cd /rsrch2/genomic_med/krai/scratch/TCGA_CCLE_SKCM/SKCM_MSTC_CCLE_RUN/snakemake_ChIPseq_pipeline/12chromHMM
rm 20SKCM_chromHMM/*
cp 16CCLE_10MSTC_20_SKCM_CHROMHMM_OUTPUT/M*-P*segments.bed 20SKCM_chromHMM/

ls 20SKCM_chromHMM/
M028-P008_18_segments.bed  M275-P008_18_segments.bed  M409-P011_18_segments.bed  M762-P008_18_segments.bed
M035-P010_18_segments.bed  M305-P009_18_segments.bed  M527-P010_18_segments.bed  M807-P010_18_segments.bed
M137-P008_18_segments.bed  M306-P008_18_segments.bed  M642-P008_18_segments.bed  M822-P010_18_segments.bed
M233-P010_18_segments.bed  M357-P010_18_segments.bed  M721-P010_18_segments.bed  M852-P008_18_segments.bed
M263-P011_18_segments.bed  M399-P010_18_segments.bed  M749-P010_18_segments.bed  M857-P010_18_segments.bed

cd ~/scratch
mkdir SKCM_RoadTrip
cd SKCM_RoadTrip
git clone https://github.com/crazyhottommy/pyflow-epilogos
source activate py351
module load R/3.4.1-shlib
cd pyflow-epilogos/

# I modified the sample2json.py a bit to only extract M028 rather than M028-P008 as the sample name. 
 python3 sample2json.py --segment_dir /rsrch2/genomic_med/krai/scratch/TCGA_CCLE_SKCM/SKCM_MSTC_CCLE_RUN/snakemake_ChIPseq_pipeline/12chromHMM/20SKCM_chromHMM/
```
